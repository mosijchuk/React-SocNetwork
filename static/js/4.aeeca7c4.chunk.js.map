{"version":3,"sources":["components/Users/Users.module.scss","components/Users/User.jsx","components/Users/Users.jsx","../node_modules/reselect/es/index.js","components/Users/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["module","exports","container","page_wrap","content","contentArea","contentArea_wrap","content_head","btn_b","selected","form_group","errorSubmit","sectionHeader","secondary","sticker","usersWrap","user","avatar","userInfo","userName","location","status","followWrap","showMoreWrap","User","_ref","u","follow","unfollow","Object","objectWithoutProperties","react_default","a","createElement","className","s","key","id","react_router_dom","to","src","photos","small","userPhoto","alt","name","followed","href","concat","onClick","e","preventDefault","Users","React","memo","props","usersCount","users","map","Users_User","currentPage","usersPages","isFetching","Preloader","inner","center","noBg","onPageChange","defaultEqualityCheck","b","createSelector","memoize","_len","arguments","length","memoizeOptions","Array","_key","_len2","funcs","_key2","recomputations","resultFunc","pop","dependencies","isArray","every","dep","dependencyTypes","join","Error","getDependencies","memoizedResultFunc","apply","undefined","selector","params","i","push","resetRecomputations","createSelectorCreator","func","equalityCheck","lastArgs","lastResult","prev","next","areArgumentsShallowlyEqual","getUsersAll","state","usersPage","getUsersCount","totalCount","getUsersPerPage","perPage","getUsersPagesCount","Math","ceil","getCurrentUsersPage","getUsersIsFetching","getUsersIsFollowing","isFollowing","UsersContainer","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","page","getUsers","Fragment","Users_Users","toggleIsFetching","Component","compose","connect","setUsers","setCurrentPage","setTotalCount","withAuthRedirect"],"mappings":"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","file":"static/js/4.aeeca7c4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Users_container__a50dK\",\"page_wrap\":\"Users_page_wrap__2C-KE\",\"content\":\"Users_content__2toJf\",\"contentArea\":\"Users_contentArea__rZi7g\",\"contentArea_wrap\":\"Users_contentArea_wrap__wsSnq\",\"content_head\":\"Users_content_head__3K85y\",\"btn_b\":\"Users_btn_b__1s1Es\",\"selected\":\"Users_selected__2CxVH\",\"form_group\":\"Users_form_group__nSjyn\",\"errorSubmit\":\"Users_errorSubmit__Njrlz\",\"sectionHeader\":\"Users_sectionHeader__3g8dg\",\"secondary\":\"Users_secondary__8eWcm\",\"sticker\":\"Users_sticker__AbI-j\",\"usersWrap\":\"Users_usersWrap__1plbe\",\"user\":\"Users_user__1d1r4\",\"avatar\":\"Users_avatar__18St8\",\"userInfo\":\"Users_userInfo__1yNR7\",\"userName\":\"Users_userName__1LWus\",\"location\":\"Users_location__1oCXG\",\"status\":\"Users_status__3YYxM\",\"followWrap\":\"Users_followWrap__1T0La\",\"showMoreWrap\":\"Users_showMoreWrap__37sh6\"};","import React from \"react\";\nimport s from \"./Users.module.scss\";\nimport userPhoto from \"../../assets/img/user.jpg\";\nimport { NavLink } from \"react-router-dom\";\nimport Preloader from \"../common/Preloader/Preloader\";\n\nlet User = ({ u, follow, unfollow, ...props }) => {\n  return (\n    <div className={s.user} key={u.id}>\n      <NavLink to={\"/profile/\" + u.id} className={s.avatar}>\n        <img\n          src={u.photos.small != null ? u.photos.small : userPhoto}\n          alt=\"avatar\"\n        />\n      </NavLink>\n      <div className={s.userInfo}>\n        <NavLink to={\"/profile/\" + u.id} className={s.userName}>\n          {u.name}\n        </NavLink>\n        <p className={s.location}>Kyiv, Ukraine</p>\n        <p className={s.status}>{u.status}</p>\n      </div>\n      <div className={s.followWrap}>\n        {u.followed ? (\n          <a\n            href=\"#\"\n            className={`${s.btn_b} ${s.selected}`}\n            onClick={e => {\n              e.preventDefault();\n              unfollow(u.id);\n            }}\n          >\n            Unfollow\n          </a>\n        ) : (\n          <a\n            href=\"#\"\n            className={s.btn_b}\n            onClick={e => {\n              e.preventDefault();\n              follow(u.id);\n            }}\n          >\n            Follow\n          </a>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default User;\n","import React from \"react\";\nimport s from \"./Users.module.scss\";\nimport User from \"./User\";\nimport Preloader from \"../common/Preloader/Preloader\";\n\nconst Users = React.memo(props => {\n  return (\n    <div className={s.content}>\n      <div className={s.contentArea}>\n        <div className={s.sectionHeader}>\n          <h2>Users</h2>\n          <p className={s.secondary}>{props.usersCount}</p>\n        </div>\n        <div className={s.usersWrap}>\n          {props.users.map(u => (\n            <User\n              u={u}\n              follow={props.follow}\n              unfollow={props.unfollow}\n              props={props}\n              key={u.id}\n            />\n          ))}\n        </div>\n      </div>\n\n      {props.currentPage !== props.usersPages && (\n        <div className={s.showMoreWrap}>\n          {props.isFetching ? (\n            <Preloader inner={true} center={true} noBg={true} />\n          ) : (\n            <a\n              href=\"#\"\n              className={`${s.btn_b} ${s.selected}`}\n              onClick={e => {\n                e.preventDefault();\n                props.onPageChange(props.currentPage + 1);\n              }}\n            >\n              Load more\n            </a>\n          )}\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default Users;\n","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n  var length = prev.length;\n\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n  var lastArgs = null;\n  var lastResult = null; // we reference arguments instead of spreading them for performance reasons\n\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      return memoizedResultFunc.apply(null, params);\n    });\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n\n    selector.recomputations = function () {\n      return recomputations;\n    };\n\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n\n    return selector;\n  };\n}\nexport var createSelector = createSelectorCreator(defaultMemoize);\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import React from \"react\";\nimport { createSelector } from \"reselect\";\n\nconst getUsersSelector = state => {\n  return state.usersPage.users;\n};\n\nexport const getUsersAll = createSelector(getUsersSelector, users => {\n  return users;\n});\n\nexport const getUsersCount = state => {\n  return state.usersPage.totalCount;\n};\n\nexport const getUsersPerPage = state => {\n  return state.usersPage.perPage;\n};\n\nexport const getUsersPagesCount = state => {\n  return Math.ceil(state.usersPage.totalCount / state.usersPage.perPage);\n};\n\nexport const getCurrentUsersPage = state => {\n  return state.usersPage.currentPage;\n};\n\nexport const getUsersIsFetching = state => {\n  return state.usersPage.isFetching;\n};\n\nexport const getUsersIsFollowing = state => {\n  return state.usersPage.isFollowing;\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport Users from \"./Users\";\nimport {\n  follow,\n  unfollow,\n  setUsers,\n  setCurrentPage,\n  setTotalCount,\n  getUsers\n} from \"../../redux/usersReducer\";\nimport Preloader from \"../common/Preloader/Preloader\";\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\nimport { compose } from \"redux\";\nimport {\n  getUsersAll,\n  getUsersCount,\n  getUsersPerPage,\n  getUsersPagesCount,\n  getCurrentUsersPage,\n  getUsersIsFetching,\n  getUsersIsFollowing\n} from \"./users-selectors\";\n\nclass UsersContainer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    if (this.props.users.length === 0) {\n      this.props.getUsers(this.props.perPage, 1);\n    }\n  }\n  onPageChange = page => {\n    this.props.getUsers(this.props.perPage, page);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.isFollowing && <Preloader />}\n        <Users\n          users={this.props.users}\n          usersCount={this.props.usersCount}\n          currentPage={this.props.currentPage}\n          usersPages={this.props.usersPages}\n          follow={this.props.follow}\n          unfollow={this.props.unfollow}\n          onPageChange={this.onPageChange}\n          toggleIsFetching={this.props.toggleIsFetching}\n          isFetching={this.props.isFetching}\n          isFollowing={this.props.isFollowing}\n        />\n      </>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    users: getUsersAll(state),\n    usersCount: getUsersCount(state),\n    perPage: getUsersPerPage(state),\n    usersPages: getUsersPagesCount(state),\n    currentPage: getCurrentUsersPage(state),\n    isFetching: getUsersIsFetching(state),\n    isFollowing: getUsersIsFollowing(state)\n  };\n};\n\nexport default compose(\n  connect(mapStateToProps, {\n    follow,\n    unfollow,\n    setUsers,\n    setCurrentPage,\n    setTotalCount,\n    getUsers\n  }),\n  withAuthRedirect\n)(UsersContainer);\n"],"sourceRoot":""}