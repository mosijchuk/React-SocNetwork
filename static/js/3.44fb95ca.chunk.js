(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{331:function(e,a,t){e.exports={container:"dialogs_container__2pVt7",page_wrap:"dialogs_page_wrap__2aZTd",content:"dialogs_content___bRhf",contentArea:"dialogs_contentArea__RkOaH",contentArea_wrap:"dialogs_contentArea_wrap__-BiJS",content_head:"dialogs_content_head__3uM12",btn_b:"dialogs_btn_b__24EZe",selected:"dialogs_selected__1Gfqo",form_group:"dialogs_form_group__1XHIJ",errorSubmit:"dialogs_errorSubmit__7o76T",sectionHeader:"dialogs_sectionHeader__1nDcX",secondary:"dialogs_secondary__10C3U",sticker:"dialogs_sticker__2P5sx",dialogsList:"dialogs_dialogsList__ssiq5",dialogs:"dialogs_dialogs__3E4pd",active:"dialogs_active__36OJ_",dialogArea:"dialogs_dialogArea__1kZGS",postMessage:"dialogs_postMessage__33BiJ",selectActionWrap:"dialogs_selectActionWrap__3DfZI",cancelSelect:"dialogs_cancelSelect__1k24-",deleteSelected:"dialogs_deleteSelected__241Ep",emptyDialog:"dialogs_emptyDialog__2UznD"}},332:function(e,a,t){e.exports={container:"DialogItem_container__1gvA-",page_wrap:"DialogItem_page_wrap__2zsIO",content:"DialogItem_content__3jpZm",contentArea:"DialogItem_contentArea___nZOP",contentArea_wrap:"DialogItem_contentArea_wrap__2dyLO",content_head:"DialogItem_content_head__3S6GL",btn_b:"DialogItem_btn_b__22wAY",selected:"DialogItem_selected__1wKzI",form_group:"DialogItem_form_group__rMt4U",errorSubmit:"DialogItem_errorSubmit__3kK-q",sectionHeader:"DialogItem_sectionHeader__Fur4N",secondary:"DialogItem_secondary__d_KCA",sticker:"DialogItem_sticker__1Rxjz",dialogItem:"DialogItem_dialogItem__1nzJQ",active:"DialogItem_active__JdILs",hasNewMessages:"DialogItem_hasNewMessages__3N7jn",avatar:"DialogItem_avatar__37g2d",userName:"DialogItem_userName__1ETyt",postDate:"DialogItem_postDate__27tAZ",selectedDialogIcon:"DialogItem_selectedDialogIcon__1_nlD"}},333:function(e,a,t){e.exports={container:"DialogMessage_container__1VnMK",page_wrap:"DialogMessage_page_wrap__1r5wk",content:"DialogMessage_content__2CF_l",contentArea:"DialogMessage_contentArea__3M17B",contentArea_wrap:"DialogMessage_contentArea_wrap__3Ojvo",content_head:"DialogMessage_content_head__q2BRk",btn_b:"DialogMessage_btn_b__nP6h5",selected:"DialogMessage_selected__rS4xR",form_group:"DialogMessage_form_group__2s0s0",errorSubmit:"DialogMessage_errorSubmit__1RQwB",sectionHeader:"DialogMessage_sectionHeader__1-b8p",secondary:"DialogMessage_secondary__S4-aq",sticker:"DialogMessage_sticker__1IY0H",messageWrap:"DialogMessage_messageWrap__2ZjsY",messageUnReaded:"DialogMessage_messageUnReaded__2kYIF",messageSelected:"DialogMessage_messageSelected__1wazP",messageEditMode:"DialogMessage_messageEditMode__3kQBv",message:"DialogMessage_message__1piUU",avatar:"DialogMessage_avatar__2Xv4Q",messageText:"DialogMessage_messageText__oR5OC",date:"DialogMessage_date__XvRST",owner:"DialogMessage_owner__1XX2Q"}},335:function(e,a,t){"use strict";t.r(a);var s=t(0),o=t.n(s),n=t(10),c=t(76),l=t(48),i=t(13),_=t.n(i),g=t(331),r=t.n(g),d=t(332),m=t.n(d),u=t(12),p=t(106),M=t.n(p),D=function(e){var a=e.lastActivity.split(["T"])[1].substr(0,5);return o.a.createElement("div",null,o.a.createElement(u.b,{to:"/dialogs/"+e.userId,className:"\n        ".concat(m.a.dialogItem," ").concat(e.selected&&m.a.selected," \n        ").concat(e.hasNewMessages&&m.a.hasNewMessages,"\n        ")},o.a.createElement("img",{src:e.avatar?e.avatar:M.a,alt:"userPhoto",className:m.a.avatar}),o.a.createElement("span",{className:m.a.userName},e.userName),e.selected?o.a.createElement("span",{className:m.a.selectedDialogIcon},o.a.createElement(_.a,{icon:"label_important",size:18})):o.a.createElement(o.a.Fragment,null,e.newMessagesCount>0?o.a.createElement("span",{className:m.a.sticker},e.newMessagesCount):o.a.createElement("span",{className:m.a.postDate},a))))},E=t(333),f=t.n(E),v=function(e){var a=e.date.split(["T"])[1].substr(0,5),t=Object(s.useState)(!1),n=Object(l.a)(t,2),c=n[0],i=n[1],_=function(){e.deselectMessage(e.id),i(!1),e.checkEditMode()};return Object(s.useEffect)(function(){!e.editMode&&c&&_()},[e.editMode]),o.a.createElement("div",{className:"".concat(f.a.messageWrap," ").concat(!e.viewed&&f.a.messageUnReaded," ").concat(c?f.a.messageSelected:""," ").concat(e.editMode&&f.a.messageEditMode),onClick:c?_:function(){e.selectMessage(e.id),i(!0),e.checkEditMode()}},o.a.createElement("div",{className:e.userType?"".concat(f.a.message," ").concat(f.a.owner):f.a.message},o.a.createElement("img",{src:e.avatar?e.avatar:M.a,alt:"userPhoto",className:f.a.avatar}),o.a.createElement("div",{className:f.a.messageText},e.message,o.a.createElement("div",{className:f.a.date},a))))},b=t(146),w=t(147),I=t(35),h=Object(w.a)({form:"profileDialogMessage"})(function(e){return o.a.createElement("form",{onSubmit:e.handleSubmit,onKeyDown:function(a){13===a.keyCode&&(a.preventDefault(),e.handleSubmit())}},o.a.createElement(_.a,{icon:"attach_file",size:18}),o.a.createElement(b.a,{component:"input",type:"text",name:"message_text",placeholder:"Message...",autoComplete:"off"}),o.a.createElement("button",{type:"submit"},o.a.createElement(_.a,{icon:"send",size:24})))}),N=function(e){var a=Object(s.useState)(!1),t=Object(l.a)(a,2),n=t[0],c=t[1],i=e.match.params.dialogId;Object(s.useEffect)(function(){n||e.getDialogs().then(function(){c(!0)})},[]),Object(s.useEffect)(function(){i&&e.setDialog(i)},[i]);var g=e.dialogs.map(function(a){return o.a.createElement(D,{key:a.id,avatar:a.photos.small,userId:a.id,userName:a.userName,hasNewMessages:a.hasNewMessages,lastActivity:a.lastDialogActivityDate,newMessagesCount:a.newMessagesCount,selected:e.match.params.dialogId==a.id})}),d=e.messages.map(function(a){return o.a.createElement(v,{key:a.id,id:a.id,avatar:a.avatar,userId:a.userId,message:a.body,date:a.addedAt,userType:a.senderId==e.ownerId&&"owner",viewed:a.viewed,selected:!1,selectMessage:e.selectMessage,deselectMessage:e.deselectMessage,checkEditMode:e.checkEditMode,editMode:e.editMode.status})});return o.a.createElement("div",{className:"".concat(r.a.dialogs," ").concat(i&&r.a.active)},o.a.createElement("div",{className:r.a.contentArea},o.a.createElement("div",{className:r.a.dialogsList},e.isLoadingDialogs?o.a.createElement(I.a,{center:!0,inner:!0}):o.a.createElement(o.a.Fragment,null,g))),o.a.createElement("div",{className:r.a.contentArea},i?o.a.createElement("div",{className:r.a.dialogArea},e.isLoadingMessages?o.a.createElement(I.a,{center:!0,inner:!0}):o.a.createElement(o.a.Fragment,null,d),o.a.createElement("div",{className:r.a.postMessage},e.editMode.status?o.a.createElement("div",{className:r.a.selectActionWrap},o.a.createElement("a",{href:"#",className:r.a.cancelSelect,onClick:function(){e.cancelSelectMessages(),e.checkEditMode()}},o.a.createElement("small",null,"Cancel")),o.a.createElement("small",null,o.a.createElement("b",null,e.editMode.count," message",e.editMode.count>1?"s":""," selected")),o.a.createElement("a",{href:"#",className:r.a.deleteSelected,onClick:function(){e.deleteSelectedMessages()}},o.a.createElement(_.a,{icon:"delete_forever",size:18}),o.a.createElement("small",null,"Delete selected"))):o.a.createElement(h,{onSubmit:function(a){e.sendMessage(i,a.message_text,"profileDialogMessage")}}))):o.a.createElement("div",{className:r.a.emptyDialog},o.a.createElement(_.a,{icon:"touch_app",size:88}),o.a.createElement("p",null,"Select dialogue"))))},S=t(8),k=t(107),A=t(18);a.default=Object(S.d)(Object(n.b)(function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages.items,ownerId:e.auth.userId,editMode:e.dialogsPage.editMode,isLoadingDialogs:e.dialogsPage.isLoadingDialogs,isLoadingMessages:e.dialogsPage.isLoadingMessages}},{sendMessage:c.i,getDialogs:c.g,setDialog:c.j,selectMessage:c.h,deselectMessage:c.f,checkEditMode:c.b,cancelSelectMessages:c.a,deleteSelectedMessages:c.e}),A.g,k.a)(N)}}]);
//# sourceMappingURL=3.44fb95ca.chunk.js.map